<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generator</title>
    <!-- Add Bootstrap CSS link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Add jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="jspdf.plugin.autotable.js"></script>
    <script src ="jspdf.umd.min.js"></script>
</head>

<body>

    <div class="container mt-5">
        <h1 class="text-center mb-4">Invoice</h1>
        <div class="row">
            <div class="col-md-6">
                <h3>Customer Details</h3>
                <!-- Add customer details here (name, address, contact, etc.) -->
                <p>Name: John Doe</p>
                <p>Address: 123 Main Street</p>
                <p>Contact: john@example.com</p>
            </div>
            <div class="col-md-6">
                <h3>Invoice Details</h3>
                <table class="table table-bordered" id="invoiceTable">
                    <thead>
                        <tr>
                            <th scope="col">Item Name</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Unit Price</th>
                            <th scope="col">Total Price</th>
                        </tr>
                    </thead>
                    <tbody id="invoiceTableBody">
                        <!-- Invoice items will be dynamically added here -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="3" class="text-end">Grand Total:</th>
                            <th id="grandTotal">$0</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="text-center">
            <button type="button" class="btn btn-primary" onclick="generateInvoice()">Generate Invoice</button>
            <button type="button" class="btn btn-secondary" onclick="downloadInvoice()">Download Invoice (PDF)</button>
        </div>
    </div>

    <!-- Add Bootstrap JS and Popper.js scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function generateInvoice() {
                // Sample data for the invoice (replace this with actual data from your system)
                const invoiceData = [
                    { item: 'Product 1', quantity: 2, unitPrice: 10 },
                    { item: 'Product 2', quantity: 1, unitPrice: 15 },
                    // Add more items as needed
                ];

                let grandTotal = 0;
                const invoiceTableBody = document.getElementById('invoiceTableBody');
                invoiceTableBody.innerHTML = '';

                // Generate rows for each item in the invoiceData
                invoiceData.forEach(item => {
                    const total = item.quantity * item.unitPrice;
                    grandTotal += total;

                    const row = document.createElement('tr');
                    row.innerHTML = `
        <td>${item.item}</td>
        <td>${item.quantity}</td>
        <td>$${item.unitPrice}</td>
        <td>$${total}</td>
      `;

                    invoiceTableBody.appendChild(row);
                });

                // Update the grand total in the table
                const grandTotalElement = document.getElementById('grandTotal');
                grandTotalElement.textContent = `$${grandTotal}`;

                // Add an event listener to the downloadInvoice button
                document.getElementById('downloadInvoice').addEventListener('click', downloadInvoice);
            }

            function downloadInvoice() {
                // Get the invoice table and convert it to a data URL
                const table = document.getElementById('invoiceTable');
                const tableDataURL = table.toDataURL();

                // Add customer details and invoice table to the PDF
                const doc = new jsPDF();
                doc.setFontSize(12);
                doc.text('Customer Details:', 20, 20);
                doc.text('Name: John Doe', 20, 30);
                doc.text('Address: 123 Main Street', 20, 40);
                doc.text('Contact: john@example.com', 20, 50);

                doc.addPage();
                doc.text('Invoice Details:', 20, 20);
                doc.addImage(tableDataURL, 'PNG', 20, 30, 160, 100);

                // Save the PDF
                doc.save('invoice.pdf');
            }
    </script>
</body>

</html>